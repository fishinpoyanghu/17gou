<ion-view view-title="全部分类" hide-nav-bar="isHideNaviBar" class="classify-area-page" on-swipe-left="goNext()" on-swipe-right="goPre()">

    <ion-nav-buttons side="left">
        <button class="dp-button button-icon ion-chevron-left" ng-click="$ionicGoBack()">
        </button>
    </ion-nav-buttons>


    <!--<aside id="aside" class="left-bar clearfix slide-in-up {{showClassify ? 'ng-enter-active' : ''}}"  style="top:{{leftBarTop}};z-index: 20;left:auto;right:0;background-color:rgba(0,0,0,.7);width:100%;" ng-click="closeClass()">

        <div class="list  fr" style="background-color:#fff;width:100%;height: auto;padding:20px 0;">

            <style>
                .clas-item  {
                    width: 25%;
                    display: inline-block;
                    float:left;
                    padding: 10px 0;
                    position: relative;
                }
                .clas .active {
                    color: #f72331;
                }
                .clas-item:after {
                    content: '';
                    position: absolute;
                    top: 11px;
                    right: 0px;
                    display: inline-block;
                    height: 21px;
                    width: 1px;
                    background-color: #e5e5e5;
                }
                .clas-item:nth-child(4n):after,.clas-item:last-child:after {
                    background-color: transparent;
                }

            </style>
            <div class="f-28 clearfix clas">
                <div class="clas-item {{goods_type_id == null ? 'active' : ''}}" ng-click="fetchData(null)">
                    全部商品
                </div>

                <div class="clas-item dm-nowrap {{goods_type_id == category.goods_type_id ? 'active' : ''}}" ng-repeat="category in categoryList" ng-click="fetchData(category.goods_type_id,category.activity_type)">
                    {{::category.name}}
                </div>
                <div class="clas-item dm-nowrap {{goods_type_id == year_huo.goods_type_id ? 'active' : ''}}" ng-click="fetchData(year_huo.goods_type_id)">
                    {{::year_huo.name}}
                </div>
                <div class="clas-item dm-nowrap {{activity_type == activityZone.activity_type ? 'active' : ''}}" ng-repeat="activityZone in Activity_zone" ng-click="fetchData2(activityZone.activity_type)">
                    {{::activityZone.name}}
                </div>

            </div>

        </div>
    </aside>-->

    <!-- <aside id="aside2" class="left-bar clearfix slide-in-up {{showClassify2 ? 'ng-enter-active' : ''}}"  style="z-index: 20;left:auto;right:0;background-color:rgba(0,0,0,.7);width:100%;" ng-click="closeClass2()">
         <div class="list  fr" style="background-color:#fff;width:100%;height: auto;padding:20px 0;">
             <style>
                 .clas-item  {
                     width: 25%;
                     display: inline-block;
                     float:left;
                     padding: 10px 0;
                     position: relative;
                 }
                 .clas .active {
                     color: #f72331;
                 }
                 .clas-item:after {
                     content: '';
                     position: absolute;
                     top: 11px;
                     right: 0px;
                     display: inline-block;
                     height: 21px;
                     width: 1px;
                     background-color: #e5e5e5;
                 }
                 .clas-item:nth-child(4n):after,.clas-item:last-child:after {
                     background-color: transparent;
                 }

             </style>
             <div class="f-28 clearfix clas">
                 <div class="clas-item {{goods_type_id == null ? 'active' : ''}}" ng-click="fetchData(null)">
                     全部商品
                 </div>

                 <div class="clas-item dm-nowrap {{goods_type_id == category.goods_type_id ? 'active' : ''}}" ng-repeat="category in categoryList" ng-click="fetchData(category.goods_type_id,category.activity_type)">
                     {{::category.name}}
                 </div>
                 <div class="clas-item dm-nowrap {{goods_type_id == year_huo.goods_type_id ? 'active' : ''}}" ng-click="fetchData(year_huo.goods_type_id)">
                     {{::year_huo.name}}
                 </div>
                 <div class="clas-item dm-nowrap {{activity_type == activityZone.activity_type ? 'active' : ''}}" ng-repeat="activityZone in Activity_zone" ng-click="fetchData2(activityZone.activity_type)">
                     {{::activityZone.name}}
                 </div>
             </div>

         </div>
     </aside>-->
    <!--添加搜查-->
    <!--<div style="top:{{inWechatB ? '8px' : '50px'}};display: block;height: 32px;line-height:32px;background-color: rgba(225, 225, 225, 0.7);position: absolute;width: 80%; z-index: 20;left: 50%;transform: translateX(-50%);color:#7F6E6F;border-radius: 20px;" class="clearfix">
        <div class="fl">
            <a ng-click="go_search()">
                <img class="search_img" src="img/search/search.png" alt="">
            </a>
        </div>
        <div class="sd_sousuo fl" ng-click="go_search()">
            <a style="color:#7F6E6F;font-size: 18px;font-weight: 500;">
                搜索商品
            </a>

        </div>
        <div class="fr">
            <a href="#/attention">
                <img class="erweima_img" src="img/search/erweima.png" alt="">
            </a>
        </div>
    </div>-->
    <!--<div id="search" class="clearfix"  style="top:{{inWechatB ? '0px' : '44px'}};position: absolute;z-index: 99;">

        <div class="shuru2 fl" ng-click="go_search()">
            <div class="sosuo">
                <img class="search_img" src="img/search/search2.png" alt="">
                <span class="search_name">点一点</span>
            </div>
        </div>
        <div class="two_xing2 fr" ng-click="goHome()">
            <img class="ic2" src="img/icon/home.png"  />
        </div>
    </div>-->
    <div id="search" class="clearfix"  style="top:{{inWechatB ? '0px' : '44px'}};position: absolute;z-index: 99;">

        <div class="shuru2 fl" ng-click="go_search()">
            <!--<a href="#/classification_details">
                <img class="search_img" src="img/search/search.png" alt="">
                <span>搜索商品名称</span>
            </a>-->
            <div class="sosuo">
                <img class="search_img" src="img/search/search2.png" alt="">
                <span class="search_name">点一点</span>
            </div>
        </div>
        <div class="two_xing2 fr" ng-click="goHome()">
            <img class="ic2" src="img/icon/home.png"  />
        </div>
        <!--<div class="fr">
            <a href="#/attention">
                <img class="erweima_img" src="img/search/erweima.png" alt="">
            </a>
        </div>-->
    </div>
    <!--不在内容区里的顶部分类栏-->
    <div id="class_details_pic2" class="bar bar-subheader" style="{{inWechatB ? 'top:0;' : '' }};height:{{inWechatB ? '87px' : '82px' }};border-bottom: 1px solid #E5E2E2;" >
        <div class="row  row-center dm-goods-classify" style="margin-top:{{inWechatB ? '48px' : '43px'}};border-bottom: 1px solid #ededed;border-top: 1px solid #ededed;">
            <div class="col nav-col"  ng-click="changeActive('weight','none')">
                <span class="nav-item {{order_key == 'weight' ? 'active' : ''}} nav-item2" style="padding:0;">热门推荐</span>
            </div>
            <div class="col nav-col"  ng-click="changeActive('time','none')">
                <span class="nav-item {{order_key == 'time' ? 'active' : ''}} nav-item2" style="padding:0;">最新商品</span>
            </div>
            <div class="col nav-col " ng-click="showClass2()">
                <div class="nav-item clearfix ">
                    <span class="fl nav-item2">其他分类 <i class="ion-chevron-right"></i></span>
                </div>
            </div>
        </div>
    </div>
    <style>
        .dp-floatBtn--bl {
            left: auto;
            right: 40px;
            bottom:60px;
        }
        .dm-goods-classify .nav-item {
            padding: 0 6px;
        }

    </style>
    <ion-content id="text" class="has-subheader classify-page"  on-scroll="hua()" style="{{inWechatB ? 'top:88px;' : (inIosApp ? 'top:126px;' : 'top:88px;') }}">
        <!--<div ng-style="myObj">
            <img src="img/commodity_classification/big_pic_02.jpg" alt="">
        </div>-->
        <!--在内容区里的中间分类栏-->
        <div id="class_details_pic" class="bar-subheader" style="display:none;smargin: 0; width: 100%;height: 38px;">
            <div class="row  row-center dm-goods-classify" style="margin-top:-4.8px;border-bottom: 1px solid #ededed;border-top: 1px solid #ededed;">
                <div class="col nav-col"  ng-click="changeActive('weight','none')">
                    <span class="nav-item {{order_key == 'weight' ? 'active' : ''}} nav-item2" style="padding:0;">热门推荐</span>
                </div>
                <div class="col nav-col"  ng-click="changeActive('time','none')">
                    <span class="nav-item {{order_key == 'time' ? 'active' : ''}} nav-item2" style="padding:0;">最新商品</span>
                </div>
                <div class="col nav-col " ng-click="showClass()">
                    <div class="nav-item clearfix ">
                        <span class="fl nav-item2">其他分类 <i class="ion-chevron-right"></i></span>
                    </div>
                </div>
                <!--<div class="col nav-col " ng-click="changeActive('num',order_type)">
                    <div class="nav-item clearfix {{order_key == 'num' ? 'active' : ''}}">
                        <span class="fl ">价格</span>
                        <div class="arrow-icon fl">
                            <i class="icon iconfont-arrow-down arrow-up" style="{{order_key == 'num' && order_type == 'desc' ? 'color:#333;' : ''}}"></i>
                            <i class="icon iconfont-arrow-down arrow-down" style="{{order_key == 'num' && order_type == 'asc' ? 'color:#333;' : ''}}"></i>
                        </div>
                    </div>
                </div>
                <div class="col nav-col" ng-click="changeActive('ing','none')">
                    <span class="nav-item {{order_key == 'ing' ? 'active' : ''}}" style="padding:0;">即将揭晓</span>
                </div>-->
            </div>
        </div>
        <ion-refresher
            pulling-text="下拉刷新"
            pulling-icon="ion-arrow-down-c"
            on-refresh="doRefresh('3-2-001-01')"
        >
        </ion-refresher>

        <div class="dp-broad dp-broad--leftImg pos-r" id="class_details" ng-class="{true:'',false:'dp-broad--noComment'}[dpToggleComment]" >
            <div class="dp-broad__li clearfix" ng-repeat="broad in broadlist track by $index" style="margin-top: 0;padding:10px;">
                <div class="dp-broad__img" style="width: 30%;" ng-click="gotoDetail(broad.activity_id)">
                    <img class="margin-top-14" ng-src="{{broad.title_img}}"/>
                </div>

                <div class="dp-broad__content" ng-click="gotoDetail(broad.activity_id)" style="position:relative; margin-left: 0px;  padding-left: 10px;overflow: hidden; ">
                    <h3 class="dm-nowrap-2 h3_title">{{broad.goods_title}}</h3>
                    <div class="row p-0 row-center" style="margin-top: 8px;">
                        <div class="col p-0">
                            <span class="price1">￥{{broad.need_num}}</span>
                            <span class="price2">￥{{broad.need_num}}</span>
                        </div>
                        <button ng-if="broad.activity_type == 4" class="bq_btn">二人购</button>
                        <button ng-if="broad.activity_type == 2" class="bq_btn">十元购</button>
                        <button ng-if="broad.activity_type == 6" class="bq_btn">幸运购</button>
                        <button ng-if="broad.activity_type == 7" class="bq_btn">返现购</button>
                        <button ng-if="broad.activity_type != 6 && broad.activity_type != 4 && broad.activity_type != 2 && broad.activity_type != 7" class="bq_btn">一元GO</button>
                    </div>
                    <div class="row p-0 row-center" >
                        <div class="col p-0">
                            <div class="row p-0 row-center" style="margin-top: 10px;">
                                <div class="col p-0">
                                    <div class="progress_box" style="color: #888888; float:none;">

                                        <div class="progress border-radius-10" style="width: 100%; margin-bottom: 5px;"><span class="num border-radius-10" view-progress progress="(((broad.need_num - broad.remain_num) / broad.need_num))"></span></div>
                                        <!--  <span >参与人数 <em style="color: #519fff;">{{broad.need_num - broad.remain_num}}/{{broad.need_num}}</em></span> -->
                                    </div>

                                </div>
                                <!--<div style="padding:0 8px;font-size:10px;color:#666;">
                                    {{((broad.need_num - broad.remain_num) / broad.need_num) * 100 | number:2}} %
                                </div>-->
                            </div>

                        </div>


                    </div>
                    <div class="row p-0 row-center" style="margin-top: 10px;">
                        <div class="col p-0">
                            <span class="activity_id">{{broad.activity_id}}期</span>
                        </div>

                        <div class="col p-0 work_off">
                            <span>已售出{{broad.need_num-broad.remain_num}}份</span>
                        </div>
                    </div>
                </div>


                <!--   <div class="dp-broad__content" style="position:absolute; top: 50%;  right: 1px;  line-height:32px;height: 30px;width: 45px;">
                      <div class=" btn iconfont-shopcart-outline" ng-click="addToCart(broad,$event)" ontouchstart="domController.changeAddCartState(this,true)" ontouchend="domController.changeAddCartState(this,false)" style="line-height: 1;color: #f44336;font-size: 3.2rem;z-index: 1;"></div>
                  </div> -->

                <!--下面是二人云购图标-->
                <i class="two_people__tag red_tag" ng-if="(broad.activity_type == 4)"></i>

                <i class="dp-broad__tag blue_tag" ng-if="(broad.activity_type == 2)"></i>
                <span class="limit-flag" ng-if="(broad.activity_type == 3)" style="top:3px;right: 6px;">限购</span>
                <div id="hot_bq" ng-if="(order_key == 'weight')" style="top:3px;z-index:22222;">
                    <img src="img/pintuan_icon/hot.jpg" alt="">
                </div>
            </div>

            <a class="dp-broad__more" ng-if="::dpIsShortList" ng-click="showTheListAll()">查看更多&nbsp;
                <i class="icon ion-chevron-right"></i>
            </a>
            <ion-spinner icon="dots" class="dp-spinner spinner-dark" ng-hide="isLoadFinished"></ion-spinner>
            <p  ng-show="!isMoreData && isLoadFinished" class="dp-more dp-more--bottom">没有更多啦~</p>

        </div>

        <ion-infinite-scroll
            ng-if="isMoreData"
            on-infinite="loadMore()"
            icon="ion-loading-c"
            distance="1%"
            immediate-check='false'>
        </ion-infinite-scroll>
    </ion-content>

</ion-view>

<!--<div class="dp-floatBtn dp-floatBtn&#45;&#45;bl" ng-hide="hideCartIcon">
    <a class="dp-floatBtn__link" href="#/trolley">
        <i class="icon ion-ios-cart" id="{{showCartId ? 'classify_cart' : 'sdfsd'}}"></i>
    </a>
    <i class="badge badge-assertive">{{trolleySum()}}</i>
</div>-->

